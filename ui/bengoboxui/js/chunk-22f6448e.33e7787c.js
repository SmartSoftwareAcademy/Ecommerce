(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22f6448e"],{1148:function(t,e,a){"use strict";var i=a("a691"),s=a("1d80");t.exports="".repeat||function(t){var e=String(s(this)),a="",n=i(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(a+=e);return a}},"408a":function(t,e,a){var i=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"59b6":function(t,e,a){"use strict";a("e365")},9299:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",[a("PageHeader",{attrs:{title:t.title,items:t.items}}),a("div",{staticClass:"row justify-content-between"},[a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"row justify-content-between"},[a("div",{staticClass:"col-sm-2"},[a("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-Transaction",modifiers:{"modal-Transaction":!0}}],staticClass:"btn btn-warning mb-3",attrs:{type:"button"}},[a("i",{staticClass:"mdi mdi-plus me-1"}),t._v(" Raise Invoice ")])]),a("div",{staticClass:"col-sm-2"},[a("button",{staticClass:"btn btn-secondary waves-effect waves-light uil-export",on:{click:function(e){return t.getrpt()}}},[t._v(" Export to CSV ")])]),a("div",{staticClass:"col-sm-2"},[a("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-Print",modifiers:{"modal-Print":!0}}],staticClass:"btn btn-secondary waves-effect waves-light uil-file",on:{click:function(e){return t.printpdf("p")}}},[t._v(" Print PDF ")])])])]),a("div",{staticClass:"col-sm-6"},[a("div",{staticClass:"float-end"},[a("div",{staticClass:"form-inline mb-3"},[a("div",{staticClass:"input-daterange input-group",attrs:{"data-provide":"datepicker","data-date-format":"dd M, yyyy","data-date-autoclose":"true"}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"transactionType"}},[t._v("Status")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.status=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"pending"}},[t._v("Pending")]),a("option",{attrs:{value:"completed"}},[t._v("Completed")])])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fromdate,expression:"fromdate"}],staticClass:"form-control text-left",attrs:{type:"date",placeholder:"11/13/2023",name:"From"},domProps:{value:t.fromdate},on:{input:function(e){e.target.composing||(t.fromdate=e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.todate,expression:"todate"}],staticClass:"form-control text-left",attrs:{type:"date",placeholder:"11/13/2023",name:"To"},domProps:{value:t.todate},on:{input:function(e){e.target.composing||(t.todate=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.updatearrays()}}},[a("i",{staticClass:"mdi mdi-filter-variant"})])])])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"dataTables_length",attrs:{id:"tickets-table_length"}},[a("label",{staticClass:"d-inline-flex align-items-center fw-normal"},[t._v(" Show "),a("b-form-select",{attrs:{size:"sm",options:t.pageOptions},on:{input:function(e){return t.handlePageChange(t.currentPage)}},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),t._v(" entries ")],1)])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"dataTables_filter text-md-end",attrs:{id:"tickets-table_filter"}},[a("label",{staticClass:"d-inline-flex align-items-center fw-normal"},[t._v(" Search: "),a("b-form-input",{staticClass:"form-control form-control-sm ms-2",attrs:{type:"search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)])])]),a("div",{staticClass:"table-responsive mb-0"},[a("b-table",{attrs:{"table-class":"table table-centered datatable table-card-list","thead-tr-class":"bg-transparent",items:t.saleslist,fields:t.fields,responsive:"sm","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,filter:t.filter,"filter-included-fields":t.filterOn},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(check)",fn:function(t){return[a("div",{staticClass:"custom-control custom-checkbox text-center"},[a("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"contacusercheck"+t.item.id}}),a("label",{staticClass:"custom-control-label",attrs:{for:"contacusercheck"+t.item.id}})])]}},{key:"cell(id)",fn:function(e){return[a("a",{staticClass:"text-dark fw-bold",attrs:{href:"javascript: void(0);"}},[t._v(" "+t._s(e.item.id)+" ")])]}},{key:"cell(status)",fn:function(e){return[a("div",{staticClass:"badge rounded-pill bg-soft-success font-size-12",class:{"bg-soft-warning":"pending"===e.item.status}},[t._v(" "+t._s(e.item.status)+" ")])]}},{key:"cell(date)",fn:function(e){return[a("a",{staticClass:"text-body",attrs:{href:"#"}},[t._v(t._s(e.item.date.split("T")[0]+" "+e.item.date.split("T")[1].split(".")[0]))])]}},{key:"cell(download)",fn:function(e){return[a("div",[a("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-receipt",modifiers:{"modal-receipt":!0}}],staticClass:"btn btn-light btn-sm w-xs",on:{click:function(a){t.viewReceipt(e.item),t.$emit("printReceipt")}}},[a("i",{staticClass:"uil uil-file ms-2 text-primary"})])])]}},{key:"cell(action)",fn:function(e){return[a("ul",{staticClass:"list-inline mb-0"},["pending"==e.item.status?a("li",{staticClass:"list-inline-item"},[a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"px-2 text-primary",attrs:{href:"javascript:void(0);",title:"complete"},on:{click:function(a){return t.openDialog(e.index,e.item.id)}}},[t._v("complete ")])]):t._e(),"completed"==e.item.status?a("li",{staticClass:"list-inline-item"},[a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"px-2 text-danger",attrs:{href:"javascript:void(0);",title:"Delete"},on:{click:function(a){return t.deleterec(e.index,e.item.id,e.item.code)}}},[a("i",{staticClass:"uil uil-trash-alt font-size-18"})])]):t._e()])]}}])})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"dataTables_paginate paging_simple_numbers float-end"},[a("ul",{staticClass:"pagination pagination-rounded"},[a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])]),a("b-modal",{ref:"modal",attrs:{id:"modal-receipt",title:"Print Receipt",size:"lg"}},[a("Receipt",{attrs:{items:t.salesitems,headers:t.receiptHeaders,total:t.total,paymentMethod:t.paymentMethod,receiptNo:t.paycode},on:{printReceipt:t.viewReceipt}})],1),a("b-modal",{attrs:{id:"modal-Print",title:"Print PDF","hide-footer":"",size:"bg",centered:""}},[a("reportdet",{directives:[{name:"show",rawName:"v-show",value:t.showme,expression:"showme"}],attrs:{title:t.title,orderData:t.orderData,pl:t.pl,headers:t.headers,uniqueCars:t.uniqueCars,shome:t.showme}})],1)],1)},s=[],n=(a("a4d3"),a("e01a"),a("99af"),a("4160"),a("a630"),a("a15b"),a("d81d"),a("a434"),a("4fad"),a("b64b"),a("d3b7"),a("07ac"),a("ac1f"),a("6062"),a("3ca3"),a("5319"),a("159b"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),o=a("b85c"),r=a("3835"),l=a("5658"),c=a("2579"),d=a("c2a4"),u=a("9227"),m=a("3d20"),p=a.n(m),f=a("d1b3"),h=a("a36c"),v={page:{title:"Sales List",meta:[{name:"description",content:d.description}]},components:{Layout:l["a"],PageHeader:c["a"],Receipt:f["a"],reportdet:h["a"]},data:function(){return{title:"Sales List",items:[{text:"Sales"},{text:"Sales List",active:!0}],headers:null,uniqueCars:null,showme:!0,pl:"",saleslist:[],totalRows:1,currentPage:1,perPage:25,pageOptions:[1,5,10,25,50,100,500,1e3,1500,2e3],filter:null,filterOn:[],sortBy:"age",sortDesc:!1,total:0,salesitems:[],paymentMethod:"",status:"",fromdate:"",todate:"",limit:12,offset:0,receiptHeaders:[{text:"Title",value:"title",sortable:!0},{text:"retail_price",value:"retail_price",sortable:!0},{text:"Quantity",value:"quantity",sortable:!0}],paycode:"",fields:[{key:"check",label:"#"},{key:"code",label:"Sale ID",sortable:!0},{key:"date",label:"Transaction Date",sortable:!0},{key:"sales_items.length",label:"Qty",sortable:!0},{key:"grand_total",label:"Total",sortable:!0},{key:"paymethod",label:"Payment Method",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"download",label:"Print Receipt"},"action"]}},computed:{rows:function(){return this.saleslist.length}},mounted:function(){this.updatearrays(),this.totalRows=this.saleslist.length},methods:{onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},updatearrays:function(){var t=this;p.a.fire({title:"Please Wait !",html:"Loading data...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){p.a.showLoading()}}),u["a"].get("salesList/?limit=".concat(this.limit,"&offset=").concat(this.offset,"&status=").concat(this.status,"&fromdate=").concat(this.fromdate,"&todate=").concat(this.todate)).then((function(e){t.saleslist=e.data,p.a.close()})).catch((function(t){p.a.fire({position:"center",icon:"error",title:""+t,showConfirmButton:!0}).then((function(t){p.a.close(t)}))}))},handlePageChange:function(t){this.currentPage=t,this.limit=this.perPage,this.offset=(this.currentPage-1)*this.perPage,this.updatearrays()},printpdf:function(t){this.pl=t;var e=this.saleslist.map((function(t){return{ID:t.id,"Sale ID":t.code,"Transaction Date":t.date,QTY:t.sales_items.length,"Total(KES)":t.grand_total,"Payment Method":t.paymethod,status:t.status}})),a=Object.keys(e[0]),i=[];Object.entries(e).forEach((function(t){var a=Object(r["a"])(t,2),s=a[0],n=a[1];console.log(s,n),i.push(Object.values(e[s]))}));var s=Array.from(new Set(i));this.headers=a,this.uniqueCars=s},getrpt:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth(),i=t.getDate(),s=t.getHours(),n=t.getMinutes(),r=t.getSeconds(),l=t.getMilliseconds(),c=e+"-"+a+"-"+i+"-"+s+"-"+n+"-"+r+"-"+l,d=this.saleslist.map((function(t){return{ID:t.id,"Sale ID":t.code,"Transaction Date":t.date,QTY:t.sales_items.length,"Total(KES)":t.grand_total,"Payment Method":t.paymethod,status:t.status}})),u=[],m=Object.keys(d[0]);u.push(m.join(","));var p,f=Object(o["a"])(d);try{var h=function(){var t=p.value,e=m.map((function(e){var a=(""+t[e]).replace(/"/g,'\\"');return'"'+a+'"'}));u.push(e.join(","))};for(f.s();!(p=f.n()).done;)h()}catch(y){f.e(y)}finally{f.f()}var v=u.join("\n"),b=new Blob([v],{type:"textcsv"}),g=window.URL.createObjectURL(b),w=document.createElement("a");w.setAttribute("hidden",""),w.setAttribute("href",g),w.setAttribute("download",this.title+c+".csv"),document.body.appendChild(w),w.click(),document.body.removeChild(w)},deleterec:function(t,e,a){var i=this;p.a.fire({title:"Are you sure, you want to delete sale #"+a+"?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#000000",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then((function(s){s.value&&u["a"].delete("sales/"+e+"/").then((function(){i.saleslist.splice(t,1),p.a.fire("Deleted!",a+" has been deleted.","success")})).catch((function(t){p.a.fire({position:"center",icon:"error",title:"Error!",html:t,showConfirmButton:!1,timer:1500})}))}))},openDialog:function(t,e){var a=this;p.a.fire({title:"Enter transaction code?",input:"text",inputPlaceholder:"Enter transaction code here",showCancelButton:!0,confirmButtonText:"Complete Sale",cancelButtonText:"Cancel",inputValidator:function(t){return t?"NULL"==t?"Transaction code cannot be ".concat(t,"!"):t.length<5?"Transaction code ".concat(t," is too short!"):void 0:"Please enter transaction code to continue!"}}).then((function(i){i.isConfirmed&&a.completetr(t,e,i.value)}))},completetr:function(t,e,a){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,u["a"].post("completesales/"+e+"/"+a+"/").then((function(e){i.$emit("printReceipt"),p.a.fire(e.data.title,e.data.msg,e.data.icon).then((function(){i.saleslist[t].sales_details.status="completed",i.saleslist[t].sales_details.code=a}))})).catch((function(t){p.a.fire({position:"center",icon:"error",title:"Error!",html:t,showConfirmButton:!1,timer:1500})}));case 2:case"end":return s.stop()}}),s)})))()},viewReceipt:function(t){this.total=t.grand_total,this.receiptNo=t.code,this.paymentMethod=t.paymethod;var e=[];t.sales_items.forEach((function(t){e.push({product_title:t.product_title,retail_price:t.retail_price,quantity:t.qty})})),this.salesitems=e,this.$emit("printReceipt")}},middleware:"authentication"},b=v,g=a("2877"),w=Object(g["a"])(b,i,s,!1,null,null,null);e["default"]=w.exports},b680:function(t,e,a){"use strict";var i=a("23e7"),s=a("a691"),n=a("408a"),o=a("1148"),r=a("d039"),l=1..toFixed,c=Math.floor,d=function(t,e,a){return 0===e?a:e%2===1?d(t,e-1,a*t):d(t*t,e/2,a)},u=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},m=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){l.call({})}));i({target:"Number",proto:!0,forced:m},{toFixed:function(t){var e,a,i,r,l=n(this),m=s(t),p=[0,0,0,0,0,0],f="",h="0",v=function(t,e){var a=-1,i=e;while(++a<6)i+=t*p[a],p[a]=i%1e7,i=c(i/1e7)},b=function(t){var e=6,a=0;while(--e>=0)a+=p[e],p[e]=c(a/t),a=a%t*1e7},g=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==p[t]){var a=String(p[t]);e=""===e?a:e+o.call("0",7-a.length)+a}return e};if(m<0||m>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(f="-",l=-l),l>1e-21)if(e=u(l*d(2,69,1))-69,a=e<0?l*d(2,-e,1):l/d(2,e,1),a*=4503599627370496,e=52-e,e>0){v(0,a),i=m;while(i>=7)v(1e7,0),i-=7;v(d(10,i,1),0),i=e-1;while(i>=23)b(1<<23),i-=23;b(1<<i),v(1,1),b(2),h=g()}else v(0,a),v(1<<-e,0),h=g()+o.call("0",m);return m>0?(r=h.length,h=f+(r<=m?"0."+o.call("0",m-r)+h:h.slice(0,r-m)+"."+h.slice(r-m))):h=f+h,h}})},d1b3:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container overflow-auto"},[a("v-card",{ref:"receipt",staticClass:"receipt-card",attrs:{id:"receipt"}},[a("v-card-title",{staticClass:"receipt-title"},[t._v("BengoBox Commerce")]),a("v-card-text",{staticClass:"receipt-text"},[a("p",[t._v("Receipt No: "+t._s(t.receiptNo.toUpperCase()))]),a("p",[t._v("Time: "+t._s(t.formatDate)+", "+t._s(t.formatTime))]),a("p",[t._v("------------------------------------")]),a("v-data-table",{staticClass:"hide-per-page",attrs:{headers:t.headers,items:t.items,"item-key":"id","hide-default-footer":""},scopedSlots:t._u([{key:"item.title",fn:function(e){var a=e.item;return[t._v(t._s(a.product_title))]}},{key:"item.retail_price",fn:function(e){var a=e.item;return[t._v(t._s(a.retail_price))]}},{key:"item.quantity",fn:function(e){var a=e.item;return[t._v(t._s(a.quantity))]}}],null,!0)}),a("p",[t._v("------------------------------------")]),a("v-row",[a("v-col",{staticClass:"font-weight-bold"},[t._v("Subtotal: "+t._s(t.formatCurrency(t.subtotal*t.total)))])],1),a("v-row",[a("v-col",{staticClass:"font-weight-bold"},[t._v("VAT: "+t._s(t.formatCurrency(t.tax*t.total)))])],1),a("v-row",[a("v-col",{staticClass:"font-weight-bold"},[t._v("Total: "+t._s(t.formatCurrency(t.total)))])],1),a("p",[t._v("------------------------------------")]),a("v-row",[a("v-col",{staticClass:"font-weight-bold"},[t._v("Served By:"+t._s(t.user))]),a("v-row",[a("v-col",{staticClass:"font-weight-bold"},[t._v("Payment Method: "+t._s(t.paymentMethod))])],1)],1)],1)],1)],1)},s=[],n=(a("99af"),a("b0c0"),a("a9e3"),a("b680"),{name:"Receipt",props:{items:Array,headers:Array,total:Number,paymentMethod:String,receiptNo:String},data:function(){return{subtotal:.84,tax:.16,user:JSON.parse(sessionStorage.user).name}},computed:{formatDate:function(){var t=new Date;return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate())},formatTime:function(){var t=new Date;return"".concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds())}},mounted:function(){this.$parent.$on("printReceipt",this.handlePrint)},beforeUnmount:function(){this.$parent.$off("printReceipt",this.handlePrint)},methods:{formatCurrency:function(t){return"Kshs.".concat(t.toFixed(2))},handlePrint:function(){var t=window.open("","_blank","width=800,height=600");t.document.write("<html><head><title>Receipt</title></head><body>");var e=document.getElementById("receipt").innerHTML;t.document.write(e),t.document.write("</body></html>"),t.document.close(),t.print(),t.close()}}}),o=n,r=(a("59b6"),a("2877")),l=Object(r["a"])(o,i,s,!1,null,null,null);e["a"]=l.exports},e365:function(t,e,a){}}]);
//# sourceMappingURL=chunk-22f6448e.33e7787c.js.map