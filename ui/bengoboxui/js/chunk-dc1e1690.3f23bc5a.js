(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc1e1690"],{"04f2":function(t,e,s){"use strict";s("8fe6")},"8fe6":function(t,e,s){},e76d:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid p-4"},[s("v-alert",{attrs:{value:t.showAlert,type:t.alert_type,dismissible:""},on:{"click:close":function(e){t.showAlert=!1}}},[t._v(" "+t._s(t.message)+" ")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-3 col-sm-3 col-xs-12"},[s("a",{staticClass:"btn btn-default mb-3",on:{click:function(e){return t.toggleFilters()}}},[s("i",{staticClass:"fa fa-filter"}),t._v(" "+t._s(t.showFilters?"Hide Filters":"Show Filters")+" ")]),t.showFilters?s("v-card",{attrs:{outlined:""}},[s("v-card-title",[t._v("Filters")]),s("v-divider"),s("a",{staticClass:"btn btn-primary text-white",attrs:{href:"#"},on:{click:function(e){return t.applyFilter("")}}},[t._v("View All")]),[s("v-treeview",{attrs:{items:t.items,open:t.open},scopedSlots:t._u([{key:"label",fn:function(e){var a=e.item;return[s("a",{staticClass:"bg-light text-primary p-2 rounded border-1",attrs:{href:"#"},on:{click:function(e){return t.applyFilter(a)}}},[t._v(t._s(a.name))])]}}],null,!1,1534474081)})],s("v-divider"),s("v-card-title",[t._v("Price")]),s("v-range-slider",{staticClass:"align-center",attrs:{max:t.max,min:t.min,height:10,dense:""},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}}),s("v-row",{staticClass:"pa-2",attrs:{dense:""}},[s("v-col",{attrs:{cols:"12",sm:"5"}},[s("v-text-field",{attrs:{value:t.range[0],label:"Min",outlined:"",dense:""},on:{change:function(e){return t.$set(t.range,0,e)}}})],1),s("v-col",{attrs:{cols:"12",sm:"2"}},[s("p",{staticClass:"pt-2 text-center"},[t._v("TO")])]),s("v-col",{attrs:{cols:"12",sm:"5"}},[s("v-text-field",{attrs:{value:t.range[1],label:"Max",outlined:"",dense:""},on:{change:function(e){return t.$set(t.range,1,e)}}})],1)],1),s("v-divider"),s("v-card-title",[t._v("Rating")]),s("v-range-slider",{staticClass:"align-center",attrs:{max:t.maxrating,min:t.minRating,height:10,dense:""},model:{value:t.ratingRange,callback:function(e){t.ratingRange=e},expression:"ratingRange"}}),s("v-row",{staticClass:"pa-2",attrs:{dense:""}},[s("v-col",{attrs:{cols:"12",sm:"5"}},[s("v-text-field",{attrs:{value:t.ratingRange[0],label:"Min",outlined:"",dense:""},on:{change:function(e){return t.$set(t.ratingRange,0,e)}}})],1),s("v-col",{attrs:{cols:"12",sm:"2"}},[s("p",{staticClass:"pt-2 text-center"},[t._v("TO")])]),s("v-col",{attrs:{cols:"12",sm:"5"}},[s("v-text-field",{attrs:{value:t.ratingRange[1],label:"Max",outlined:"",dense:""},on:{change:function(e){return t.$set(t.ratingRange,1,e)}}})],1)],1)],2):t._e()],1),s("div",{staticClass:"col-md-9 col-sm-9 col-xs-12"},[s("v-breadcrumbs",{staticClass:"pb-0",attrs:{items:t.breadcrums}}),s("v-row",{attrs:{dense:""}},[s("v-col",{staticClass:"pl-6 pt-6",attrs:{cols:"12",sm:"8"}},[s("small",[t._v("Showing "+t._s(t.filteredProducts.length)+" of "+t._s(t.products.length)+" products")])]),s("v-col",{attrs:{cols:"12",sm:"4"}},[s("v-select",{staticClass:"pa-0",staticStyle:{"margin-bottom":"-20px"},attrs:{items:t.options,outlined:"",dense:""},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}})],1)],1),s("v-divider"),s("div",{staticClass:"row text-center"},[t._l(t.filteredProducts,(function(e){return s("div",{key:e.id,staticClass:"col-md-3 col-sm-6 col-xs-12"},[s("v-hover",{scopedSlots:t._u([{key:"default",fn:function(a){var i=a.hover;return[s("v-card",{staticClass:"mx-auto",attrs:{color:"grey lighten-4","max-width":"600"}},[e.product.images.length>0?s("v-img",{staticClass:"white--text align-end",attrs:{"aspect-ratio":1,src:e.product.images[0]?e.product.images[0].image:"https://placehold.co/600x400/000000/FFFFFF.png"}},[s("v-expand-transition",[i?s("div",{staticClass:"d-flex transition-fast-in-fast-out white darken-2 v-card--reveal display-3 white--text",staticStyle:{height:"100%"}},[i?s("router-link",{staticClass:"badge badge-pill badge-success",attrs:{to:{name:"Product Detail",params:{stockitem:e}},outlined:""}},[s("v-btn",{staticClass:"bd-primary",attrs:{href:"#",icon:""}},[s("v-icon",{staticClass:"text-primary"},[t._v("mdi-eye")])],1)],1):t._e(),s("v-btn",{attrs:{href:"#",icon:""},on:{click:function(s){return t.addFavorites(e)}}},[s("v-icon",{staticClass:"text-warning"},[t._v("mdi-heart")])],1)],1):t._e()])],1):t._e(),s("v-card-text",{staticClass:"text-primary"},[s("div",[i?s("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:{name:"Product Detail",params:{stockitem:e}}}},[t._v(t._s(e.product.title))]):t._e()],1),e.size?t._e():s("div",[t._v("KShs."+t._s(e.product.retail_price))]),e.size?s("div",[t._v(" "+t._s(e.size.size)+t._s(e.size.unit.unit_symbol)+" KShs."+t._s(e.size.retail_price)+" ")]):t._e()]),t._l(e.product.maincategory.categories,(function(e){return s("v-card-title",{key:e.id,staticClass:"d-inline-block text-white"},[s("span",{staticClass:"d-inline badge badge-pill bg-warning"},[s("a",{staticClass:"text-white",attrs:{href:"#"},on:{click:function(s){return t.applyFilter(e.name)}}},[t._v(t._s(e.name))])])])}))],2)]}}],null,!0)})],1)})),t.totalProducts>1?s("v-pagination",{attrs:{"total-visible":8,"prev-text":"Previous","next-text":"Next",length:Math.ceil(t.totalProducts/t.pageSize)},on:{input:function(e){return t.handlePageChange(t.page)}},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],2)],1)])],1)},i=[],r=(s("99af"),s("4de4"),s("4160"),s("fb6a"),s("45fc"),s("b0c0"),s("159b"),s("cee4")),n=s("3d20"),o=s.n(n),c={data:function(){return{page:1,pageSize:8,limit:8,offset:0,totalProducts:0,breadcrums:[{text:"Home",disabled:!1,href:"/"},{text:"",disabled:!1,href:"/"},{text:"",disabled:!0,href:"/"}],min:0,max:1e5,items:[],products:[],range:[0,1e6],ratingRange:[0,5],minRating:0,maxrating:5,select:"Popularity",options:["Default","Popularity","Relevance","retail_price: Low to High","retail_price: High to Low"],item:5,quantity:1,color:"",size:"",message:"Success!",showAlert:!1,alert_type:"success!",showFilters:!0}},components:{},computed:{pages:function(){return Math.ceil(this.products.length/this.pageSize)},startIndex:function(){return(this.page-1)*this.pageSize},endIndex:function(){return this.startIndex+this.pageSize},displayedProducts:function(){return this.products.slice(this.startIndex,this.endIndex)},filteredProducts:function(){var t=this;return this.products.filter((function(e){if(!e.size){var s=parseFloat(e.product.retail_price);return s>=t.range[0]&&s<=t.range[1]}if(e.size){var a=parseFloat(e.size.retail_price);return a>=t.range[0]&&a<=t.range[1]}})).slice(this.startIndex,this.endIndex)}},mounted:function(){this.$route.params.category?(this.breadcrums[1].text=this.$route.params.category.name,this.items.push(this.$route.params.category),this.updatearrays(this.$route.params.category.name)):(this.updatearrays(""),this.breadcrums[1].text="products")},methods:{toggleFilters:function(){this.showFilters=!this.showFilters,console.log(this.showFilters)},updatearrays:function(t){var e=this;o.a.fire({title:"Please Wait !",html:"Loading data...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){o.a.showLoading()}}),r["a"].get(window.$http+"stock?limit".concat(this.limit,"&offset=").concat(this.offset,"&filter=")+t).then((function(t){e.totalProducts=t.data["count"];var s=e.$route.params.category;null!=s?(e.products=t.data["results"].filter((function(t){return t.product.maincategory.name===s.name||t.product.maincategory.categories.some((function(t){return t.name===s.name}))||t.product.maincategory.categories.some((function(t){return t.Subcategories.some((function(t){return t.name===s.name}))}))})),console.log(e.products)):(e.products=t.data["results"],r["a"].get(window.$http+"categories").then((function(t){var s=t.data["results"];s.forEach((function(t,a){if(e.items.push({id:t.id,name:t.name}),s[a].Subcategories){var i=s[a].Subcategories;e.items[a]["children"]=[],i.forEach((function(t){e.items[a].children.push({id:t.id,name:t.name})}))}}))}))),o.a.close()})).catch((function(t){o.a.fire({position:"center",icon:"error",title:""+t,showConfirmButton:!0}).then((function(t){o.a.close(t)}))}))},handlePageChange:function(t){this.page=t,this.limit=this.pageSize,this.offset=(this.page-1)*this.pageSize,this.updatearrays("")},addFavorites:function(t){if(sessionStorage.getItem("user")){var e=0;t.size?t.unit_discount_price>0?(e=t.unit_discount_price,t.product.retail_price=e,t.size.retail_price=e):e=t.size.retail_price:t.product.discount_price>0?(e=t.product.discount_price,t.product.retail_price=e):e=t.product.retail_price;var s={product:t.product,item_subtotal:e,item_total:e*this.quantity};this.$store.dispatch("favorites/addProductTofavorites",s),this.message="Success!Item added to Favorites!",this.alert_type="success",this.showAlert=!0,console.log(this.$store.state.favorites)}else this.$router.push({name:"login"})},applyFilter:function(t){this.categories=[],this.products=[],this.items=[],t?(this.breadcrums[1].text=t.name,this.updatearrays(t.name)):this.updatearrays("")}}},l=c,u=(s("04f2"),s("2877")),d=Object(u["a"])(l,a,i,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-dc1e1690.3f23bc5a.js.map