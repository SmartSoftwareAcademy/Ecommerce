(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03329740"],{"2c5d":function(t,e,a){},5719:function(t,e,a){"use strict";a("2c5d")},"88ed":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",[a("PageHeader",{attrs:{title:t.title,items:t.items}}),a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row justify-content-between"},[a("div",{staticClass:"col-sm-6"},[a("button",{staticClass:"btn btn-success waves-effect waves-light uil-export",on:{click:function(e){return t.getrpt()}}},[t._v(" Export to CSV ")])]),a("div",{staticClass:"col-sm-2"},[a("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-Print",modifiers:{"modal-Print":!0}}],staticClass:"btn btn-success waves-effect waves-light mdi-file-pdf",on:{click:function(e){return t.printpdf("p")}}},[t._v(" Print PDF ")])]),a("div",{staticClass:"col-sm-2"},[a("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-Add",modifiers:{"modal-Add":!0}}],staticClass:"btn btn-success waves-effect waves-light uil-focus-add",on:{click:function(e){return t.clearvalues()}}},[t._v(" Add SubCategory ")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body changebg"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",[a("div",{staticClass:"float-end"},[a("form",{staticClass:"d-inline-flex mb-3"})])]),a("div",{staticClass:"table table-centered datatable dt-responsive nowrap table-card-list dataTable no-footer dtr-inline"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"dataTables_length",attrs:{id:"tickets-table_length"}},[a("label",{staticClass:"d-inline-flex align-items-center fw-normal"},[t._v(" Show "),a("b-form-select",{attrs:{size:"sm",options:t.pageOptions},on:{input:function(e){return t.updatearray()}},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),t._v(" entries ")],1)])]),a("div",{staticClass:"col-sm-12 col-md-6"},[a("div",{staticClass:"dataTables_filter text-md-end",attrs:{id:"tickets-table_filter"}},[a("label",{staticClass:"d-inline-flex align-items-center fw-normal"},[t._v(" Search: "),a("b-form-input",{staticClass:"form-control form-control-sm ms-2",attrs:{type:"search",placeholder:"Search..."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)])])]),a("b-table",{attrs:{"table-class":"table table-centered datatable table-card-list","thead-tr-class":"bg-transparent",items:t.orderData,fields:t.fields,responsive:"sm","per-page":t.perPage,"current-page":t.currentPage,"sort-by":t.sortBy,"sort-desc":t.sortDesc,filter:t.filter,"filter-included-fields":t.filterOn},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(id)",fn:function(e){return[a("a",{staticClass:"text-dark fw-bold",attrs:{href:"javascript: void(0);"}},[t._v(" "+t._s(e.item.id)+" ")])]}},{key:"cell(display_image)",fn:function(t){return[a("div",{staticClass:"m-auto"},[a("img",{attrs:{src:t.item.display_image,height:30}})])]}},{key:"cell(action)",fn:function(e){return[a("ul",{staticClass:"list-inline mb-0"},[a("li",{staticClass:"list-inline-item"},[a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}},{name:"b-modal",rawName:"v-b-modal.modal-Add",modifiers:{"modal-Add":!0}}],staticClass:"px-2 text-success",attrs:{href:"javascript:void(0);",title:"Edit"},on:{click:function(a){return t.edit(e.index,e.item.id,e.item.display_image,e.item.name)}}},[a("i",{staticClass:"uil uil-pen font-size-18"})])]),a("li",{staticClass:"list-inline-item"},[a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"px-2 text-danger",attrs:{href:"javascript:void(0);",title:"Delete"},on:{click:function(a){return t.deleterec(e.index,e.item.id,e.item.name)}}},[a("i",{staticClass:"uil uil-trash-alt font-size-18"})])])])]}}])})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"dataTables_paginate paging_simple_numbers float-end"},[a("ul",{staticClass:"pagination pagination-rounded"},[a("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])])])])])])])])])])])]),a("b-modal",{attrs:{id:"modal-Print",title:"Print PDF","hide-footer":"",size:"bg",centered:""}},[a("reportdet",{directives:[{name:"show",rawName:"v-show",value:t.showme,expression:"showme"}],attrs:{title:t.title,orderData:t.orderData,pl:t.pl,headers:t.headers,uniqueCars:t.uniqueCars,shome:t.showme}})],1),a("b-modal",{attrs:{id:"modal-Add",title:t.modaltitle,"hide-footer":"",size:"xl",centered:""}},[a("addsubcategory",{attrs:{name:t.name,id:t.myid,myindex:t.myindex,display_image:t.display_image,editmode:t.editmode,modaltitle:t.modaltitle,orderData:t.orderData}})],1)],1)},s=[],n=(a("a4d3"),a("e01a"),a("99af"),a("4160"),a("a630"),a("a15b"),a("d81d"),a("a434"),a("b0c0"),a("4fad"),a("b64b"),a("d3b7"),a("07ac"),a("ac1f"),a("6062"),a("3ca3"),a("5319"),a("159b"),a("ddb0"),a("2b3d"),a("b85c")),o=a("3835"),r=a("5658"),l=a("2579"),d=a("c2a4"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid p-4 m-4"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("div",{staticClass:"row  align-items-center justify-content-center"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-text col-sm-4"},[t._v("Name:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter Category Name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"card"},[t._m(0),a("div",{staticClass:"p-2 border-top"},[a("vue-dropzone",{ref:"myDropzone",attrs:{id:"dropzone",options:t.dropzoneOptions}})],1)])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-10"}),a("div",{staticClass:"col-sm-2"},[a("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.editmode,expression:"!editmode"}],attrs:{variant:"dark"},on:{click:function(e){return t.addRec()}}},[t._v("Add SubCategory")]),a("b-button",{directives:[{name:"show",rawName:"v-show",value:t.editmode,expression:"editmode"}],attrs:{variant:"dark"},on:{click:function(e){return t.editRec()}}},[t._v("Edit SubCategory")])],1)])])},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-2"},[a("div",{staticClass:"media align-items-center"},[a("div",{staticClass:"media-body overflow-hidden"},[a("h5",{staticClass:"font-size-16 mb-1"},[t._v("Display Image")])]),a("i",{staticClass:"mdi mdi-chevron-up accor-down-icon font-size-24"})])])}],m=(a("a9e3"),a("498a"),a("92c3")),f=a.n(m),p=(a("1e3f"),a("3d20")),h=a.n(p),v=a("9227"),b=v["a"].defaults.headers;b["Content-Type"]="multipart/form-data",v["a"].defaults.headers=b;var g={props:{orderData:Array,name:String,display_image:String,modaltitle:String,editmode:Boolean,id:Number,myindex:Number},components:{vueDropzone:f.a},data:function(){return{dropzoneOptions:{url:window.$http+"/subcategory/images/",autoProcessQueue:!1,uploadMultiple:!0,maxFilesize:2,acceptedFiles:"image/*",addRemoveLinks:!0,dictDefaultMessage:"Drop Category display image here or click to upload",maxFiles:10,headers:window.$headers},title:"Add SubCategories",items:[{text:"USER: Admin"},{text:"Add SubCategory",active:!0}]}},mounted:function(){this.fetchroles},methods:{fetchcats:function(){var t=this;v["a"].get("subcategories").then((function(e){t.orderData=e.data,console.log(e.data)})).catch((function(e){t.errors.push(e)}))},handleSubmit:function(){console.log("Error on submit")},addRec:function(){var t=this;if(""!=this.name.trim()){var e=new FormData,a=this.$refs.myDropzone.getAcceptedFiles();a.forEach((function(t){e.append("display_image",t)})),e.append("name",this.name);var i=this.orderData.length+1;this.orderData.push({id:i,name:this.name,display_image:this.display_image}),v["a"].post("subcategories/",e).then((function(e){console.log(e.data),h.a.fire({position:"center",icon:"success",title:"Your work has been saved. Category "+t.name+" Added",showConfirmButton:!1,timer:3e3}).then((function(e){t.clearvalues()}))})).catch((function(e){t.errors.push(e)}))}else h.a.fire("Please enter Category Name!")},editRec:function(){var t=this;if(""!=this.name.trim()){var e=new FormData,a=this.$refs.myDropzone.getAcceptedFiles();a.forEach((function(t){e.append("display_image",t)})),e.append("name",this.name),e.append("id",this.id),v["a"].put("subcategories/"+this.id+"/",e).then((function(){h.a.fire({position:"center",icon:"success",title:"Your work has been saved. Role "+t.email+" Added",showConfirmButton:!1,timer:1500}).then((function(e){t.orderData[t.myindex].name=t.name,t.orderData[t.display_image].name=t.display_image}))})).catch((function(e){t.errors.push(e)}))}else h.a.fire("Please enter Category Name")}}},C=g,y=a("2877"),w=Object(y["a"])(C,c,u,!1,null,null,null),D=w.exports,_=a("a36c"),x={name:"subcategories",page:{title:"Sub Categories",meta:[{name:"description",content:d.description}]},components:{Layout:r["a"],PageHeader:l["a"],addsubcategory:D,reportdet:_["a"]},data:function(){return{name:"",display_image:"",headers:null,uniqueCars:null,showme:!0,pl:"",editmode:!1,title:"SubCategories",modaltitle:"Add SubCategories",items:[{text:"USER:"+JSON.parse(sessionStorage.user).username},{text:"SubCategories",active:!0}],orderData:[],myid:0,myindex:0,totalRows:1,currentPage:1,perPage:10,pageOptions:[1,10,25,50,100],filter:null,filterOn:[],sortBy:"id",sortDesc:!1,fields:[{key:"id",label:"#",sortable:!0},{key:"name",sortable:!0},"action"]}},computed:{rows:function(){return this.orderData.length}},mounted:function(){this.totalRows=this.items.length,this.updatearray()},methods:{updatearray:function(){var t=this;h.a.fire({title:"Please Wait !",html:"Loading data...",allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){h.a.showLoading()}}),v["a"].get("subcategories/?limit=".concat(this.perPage,"&offset=").concat((this.currentPage-1)*this.perPage)).then((function(e){t.orderData=e.data["results"],h.a.close()})).catch((function(t){h.a.fire({position:"center",icon:"error",title:""+t,showConfirmButton:!0}).then((function(t){h.a.close(t)}))}))},printpdf:function(t){this.pl=t;var e=this.orderData.map((function(t){return{ID:t.id,Name:t.name}})),a=Object.keys(e[0]),i=[];Object.entries(e).forEach((function(t){var a=Object(o["a"])(t,2),s=a[0],n=a[1];console.log(s,n),i.push(Object.values(e[s]))}));var s=Array.from(new Set(i));this.headers=a,this.uniqueCars=s},getrpt:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth(),i=t.getDate(),s=t.getHours(),o=t.getMinutes(),r=t.getSeconds(),l=t.getMilliseconds(),d=e+"-"+a+"-"+i+"-"+s+"-"+o+"-"+r+"-"+l,c=this.orderData.map((function(t){return{ID:t.id,Name:t.name}})),u=[],m=Object.keys(c[0]);u.push(m.join(","));var f,p=Object(n["a"])(c);try{var h=function(){var t=f.value,e=m.map((function(e){var a=(""+t[e]).replace(/"/g,'\\"');return'"'+a+'"'}));u.push(e.join(","))};for(p.s();!(f=p.n()).done;)h()}catch(y){p.e(y)}finally{p.f()}var v=u.join("\n"),b=new Blob([v],{type:"textcsv"}),g=window.URL.createObjectURL(b),C=document.createElement("a");C.setAttribute("hidden",""),C.setAttribute("href",g),C.setAttribute("download",this.title+d+".csv"),document.body.appendChild(C),C.click(),document.body.removeChild(C)},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},handleSubmit:function(){console.log("Error on submit")},edit:function(t,e,a,i){this.editmode=!0,this.modaltitle="Edit SubCategory",this.myid=e,this.myindex=t,this.display_image=a,this.name=i},deleterec:function(t,e,a){var i=this;this.myid=e,this.name=a,h.a.fire({title:"Are you sure, you want to delete? "+this.name,text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#34c38f",cancelButtonColor:"#f46a6a",confirmButtonText:"Yes, delete it!"}).then((function(a){a.value&&v["a"].delete("subcategories/"+e+"/").then((function(){i.orderData.splice(t,1),h.a.fire(i.name+" Deleted!","Your record has been deleted.","success"),h.a.close()})).catch((function(t){h.a.fire({position:"center",icon:"error",title:""+t,showConfirmButton:!0}).then((function(t){h.a.close(t)}))}))}))},clearvalues:function(){this.id="",this.name="",this.editmode=!1,this.modaltitle="Add SubCategory"}}},k=x,P=(a("5719"),Object(y["a"])(k,i,s,!1,null,null,null));e["default"]=P.exports}}]);
//# sourceMappingURL=chunk-03329740.68d93c7d.js.map