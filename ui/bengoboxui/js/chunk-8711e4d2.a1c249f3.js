(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8711e4d2","chunk-2d0b295b"],{2579:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"page-title-box d-flex align-items-center justify-content-between"},[a("h4",{staticClass:"mb-0"},[t._v(t._s(t.title))]),a("div",{staticClass:"page-title-right"},[a("b-breadcrumb",{staticClass:"m-0",attrs:{items:t.items}})],1)])])])},i=[],r={props:{title:{type:String,default:""},items:{type:Array,default:function(){return[]}}}},o=r,n=a("2877"),l=Object(n["a"])(o,s,i,!1,null,null,null);e["a"]=l.exports},"6a04":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("PageHeader",{attrs:{title:t.title,items:t.items}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"card checkout-order-summary"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"p-3 bg-light mb-4"},[s("h5",{staticClass:"font-size-16 mb-0 text-uppercase"},[t._v(" Order Summary "),t.showdetails?s("span",{staticClass:"float-end ms-2 badge badge-pill bg-warning"},[t._v("#"+t._s(t.orderNo))]):t._e(),t.showdetails?t._e():s("a",{staticClass:"link mb-2 d-inline float-end mr-4",attrs:{href:"#"},on:{click:function(e){t.showdetails=!0}}},[t._v("Show details"),s("i",{staticClass:"fa fa-plus"})]),t.showdetails?s("a",{staticClass:"link mb-2 d-inline float-end mr-4",attrs:{href:"#"},on:{click:function(e){t.showdetails=!1}}},[t._v("Hide details"),s("i",{staticClass:"fa fa-minus"})]):t._e()])]),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-centered mb-0 table-nowrap"},[s("thead",[s("tr",{directives:[{name:"show",rawName:"v-show",value:t.showdetails,expression:"showdetails"}]},[s("th",{staticClass:"border-top-0",staticStyle:{width:"110px"},attrs:{scope:"col"}},[t._v("Product")]),s("th",{staticClass:"border-top-0",attrs:{scope:"col"}},[t._v("Product Desc")]),s("th",{staticClass:"border-top-0",attrs:{scope:"col"}},[t._v("retail_price(KShs)")])])]),s("tbody",[t._l(t.cart.items,(function(e){return s("tr",{directives:[{name:"show",rawName:"v-show",value:t.showdetails,expression:"showdetails"}],key:e.id},[s("th",{attrs:{scope:"row"}},[s("img",{staticClass:"avatar-md",attrs:{src:e.product.images[0].image,alt:"product-img",title:"product-img"}})]),s("td",[s("h5",{staticClass:"font-size-14 text-truncate"},[s("router-link",{staticClass:"text-dark text-truncate",attrs:{to:{name:"Product Detail",params:{product:e.product,category:e.product.maincategory}}}},[t._v(t._s(e.product.title))])],1),s("p",{staticClass:"text-muted mb-0"},[t._v(" "+t._s(e.item_subtotal)+" x "+t._s(e.quantity)+" ")])]),s("td",[t._v(" "+t._s((new Intl.NumberFormat).format(e.item_total*e.quantity))+" ")])])})),s("tr",{directives:[{name:"show",rawName:"v-show",value:t.showdetails,expression:"showdetails"}]},[t._m(0),s("td",[t._v("KShs."+t._s(t.cart.subtotal))])]),s("tr",{directives:[{name:"show",rawName:"v-show",value:t.showdetails,expression:"showdetails"}]},[t._m(1),s("td",[t._v("KShs."+t._s((new Intl.NumberFormat).format(t.cart.shipping)))])]),s("tr",{directives:[{name:"show",rawName:"v-show",value:t.showdetails,expression:"showdetails"}]},[t._m(2),s("td",[t._v("KShs."+t._s((new Intl.NumberFormat).format(t.cart.tax)))])]),s("tr",{staticClass:"overflow-hidden"},[s("td",{staticClass:"d-inline"},[s("h3",{staticClass:"font-size-15 text-uppercase text-muted"},[t._v(" Total to pay "),s("span",{staticClass:"d-inline float-end mr-4"},[t._v(" KShs."+t._s((new Intl.NumberFormat).format(t.cart.total)))])])])])],2)])])])])]),s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"custom-accordion"},[t.prevPayments?s("h5",{staticClass:"font-size-16 mb-1 text-center p-2 bg-light text-muted"},[t._v(" YOU WILL PAY WITH ")]):t._e(),t.prevPayments?s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-6"},[s("h5",{staticClass:"text-uppercase d-inline"},[s("span",[t._v(t._s(t.hiddenPhone))])]),s("span",{staticClass:"d-inline float-right mt-0 pt-0 mb-2"},[s("img",{attrs:{src:a("9b35"),width:"90",height:"50"}})])])]),s("v-divider"),t._m(3)],1)]):t._e(),"mpesa"===t.paymentMethod?s("div",{staticClass:"card"},[s("div",{staticClass:"card-body m-auto"},[s("button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-confirmdetails",modifiers:{"modal-confirmdetails":!0}}],staticClass:"btn btn-primary font-size-16 p-2"},[t._v(" PAY NOW KES "+t._s((new Intl.NumberFormat).format(t.cart.total))+" ")])])]):s("div",{staticClass:"card"},[s("div",{staticClass:"card-body m-auto"},[s("button",{staticClass:"btn btn-primary font-size-16 p-2",on:{click:function(e){return t.placeOrder()}}},[t._v(" PLACE ORDER -> Total to be paid Ksh."+t._s((new Intl.NumberFormat).format(t.cart.total))+" ")])])])]),s("div",{staticClass:"row my-4"},[t._m(4),s("v-divider",{attrs:{height:"5"}}),t._m(5),t._m(6),s("div",{staticClass:"col text-center"},[s("v-divider",{attrs:{height:"8"}}),s("router-link",{staticClass:"btn btn-link text-muted text-uppercase font-size-18",attrs:{to:"/ecommerce/products"}},[s("i",{staticClass:"uil uil-arrow-left me-1"}),t._v(" back to bengomall ")])],1)],1)]),s("b-modal",{attrs:{title:"Confirm Payment Details",size:"lg",id:"modal-confirmdetails"}},[s("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[s("div",{staticClass:"form-group"},[s("p",{staticClass:"text-muted"},[t._v(" An M-Pesa stk push will be sent to your phone when you tap 'MAKE PAYMENT' button. Please confirm your pin on the pop-up screen to complete your order! ")]),s("label",{staticClass:"mr-4",attrs:{for:"amount"}},[t._v("Amount:(KES)")]),s("span",{staticClass:"d-inline float-right mt-0 pt-0 mb-2"},[s("img",{attrs:{src:a("9b35"),width:"90",height:"50"}})]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.cart.total,expression:"cart.total"}],staticClass:"form-control",attrs:{type:"text",id:"amount",disabled:""},domProps:{value:t.cart.total},on:{input:function(e){e.target.composing||t.$set(t.cart,"total",e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"phone"}},[t._v("Phone Number:")]),s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.PhoneNumber,expression:"PhoneNumber"}],staticClass:"form-control",attrs:{type:"text",id:"phone",disabled:!t.editablePhoneNumber},domProps:{value:t.PhoneNumber},on:{input:function(e){e.target.composing||(t.PhoneNumber=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){t.editablePhoneNumber=!0}}},[t._v(" Edit ")])])])]),s("button",{staticClass:"btn btn-primary text-white mt-2 text-uppercase",attrs:{type:"submit"},on:{click:function(e){return t.placeOrder()}}},[t._v(" make payment ")])])])],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{attrs:{colspan:"2"}},[a("h5",{staticClass:"font-size-14 m-0"},[t._v("Sub Total :")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{attrs:{colspan:"2"}},[a("h5",{staticClass:"font-size-14 m-0"},[t._v("Shipping Charge :")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{attrs:{colspan:"2"}},[a("h5",{staticClass:"font-size-14 m-0"},[t._v("Tax :")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("a",{staticClass:"link text-uppercase font-size-16 font-weight-bold text-center"},[t._v("use a different payment method")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"font-size-14"},[t._v(' By tapping "PAY NOW" I aggree to Bengomall`s '),a("a",{staticClass:"link",attrs:{href:"#"}},[t._v("Payment Terms & Conditions")]),t._v(","),a("a",{staticClass:"link",attrs:{href:"#"}},[t._v(" General Terms & Conditions")]),t._v(", and "),a("a",{staticClass:"link",attrs:{href:"#"}},[t._v("Privacy and Cockies Notice")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"font-size-14"},[a("b",[t._v("NOTE:")]),t._v("BengoPay will never ask for your Password,PIN,CVV or full card details over the phone or via email. ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("p",{staticClass:"text-center font-size-16"},[t._v(" Need help?"),a("a",{staticClass:"link",attrs:{href:"#"}},[t._v("Contact us")])])])}],r=(a("a4d3"),a("e01a"),a("4160"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("159b"),a("2579")),o=a("c2a4"),n=a("9227"),l=a("3d20"),c=a.n(l),d={components:{PageHeader:r["a"]},page:{title:"PAYMENT",meta:[{name:"description",content:o.description}]},data:function(){return{title:"PAYMENT",items:[{text:"Checkout"},{text:"Payment",active:!0}],editmode:!1,modaltitle:"Add shipping Address",myid:1,myindex:0,cartItems:[],address:[],useraddr:null,user:null,orderNo:null,paymentMethod:null,selectedAddress:null,showdetails:!1,showaddress:!1,prevPayments:!0,editablePhoneNumber:!1,PhoneNumber:"0743793901"}},computed:{cart:function(){return this.$store.state.cart},defaultaddress:function(){return this.$store.state.address.defaultaddress},getDeliveryaddress:function(){return this.$store.state.address.delivery_address},hiddenPhone:function(){var t=this.PhoneNumber.substr(0,4).replace(/./g,"x");return t+"-"+this.PhoneNumber.substr(-4)},formattedPhoneNumber:function(){return/^0/.test(this.PhoneNumber)?this.PhoneNumber.replace(/^0/,"254"):(/^254/.test(this.PhoneNumber),this.PhoneNumber)}},mounted:function(){this.cartItems=this.cart,this.user=JSON.parse(sessionStorage.user),this.orderNo=this.$route.params.orderNo,this.paymentMethod=this.$route.params.paymentMethod,this.useraddr=this.defaultaddress,this.address=this.getDeliveryaddress,this.PhoneNumber=this.useraddr.phone,console.log(this.paymentMethod)},methods:{placeOrder:function(){var t=this,e=new FormData,a="Please wait...!",s="Placing your order...";e.append("total",this.cart.total),e.append("subtotal",this.cart.subtotal),e.append("tax_amount",this.cart.tax),e.append("shipping",this.cart.shipping),e.append("orderId",this.orderNo),e.append("address_id",this.address.id),e.append("paymethod",this.paymentMethod),e.append("userid",this.user.id),e.append("status","pending");var i=[];if(this.cart.items.forEach((function(t){i.push({stock_id:t.stock,quantity:t.quantity,item_subtotal:t.item_subtotal,item_total:t.item_total,tax:t.tax,color:t.color,size:t.size})})),e.append("orderitems",JSON.stringify(i)),"mpesa"===this.paymentMethod){if(!/^(2547|2541)\d{8}$/.test(this.formattedPhoneNumber)||12!==this.formattedPhoneNumber.length)return void c.a.fire("Phone validation error!","Invalid phone number!","warning");s="Payment processing...",a="Please Wait...!\nThis may take upto 1 min!"}c.a.fire({title:a,html:s,timer:6e4,allowOutsideClick:!1,showConfirmButton:!1,willOpen:function(){c.a.showLoading()}}),n["a"].post("oerderadd/",e).then((function(e){"mpesa"===t.paymentMethod?n["a"].post("stkpush/",{orderId:t.orderNo,phone:t.formattedPhoneNumber,total:t.cart.total,reference:"5464747",tr_description:"Bengomall"}).then((function(e){console.log(e.data);var a=e.data["password"],s=e.data["checkoutID"],i=e.data["timestamp"];n["a"].post("payment/confirm/",{pwd:a,timestamp:i,chekoutID:s,orderId:t.orderNo}).then((function(t){c.a.close(),c.a.fire({position:"center",icon:"success",title:"Success!",html:t.data.toString(),showConfirmButton:!1,timer:3e3})}))})).then((function(){t.$router.push("/"),t.clearValues()})):c.a.fire({position:"center",icon:e.data.icon,title:e.data.title,html:e.data.msg,showConfirmButton:!0}).then((function(){t.$router.push("/"),t.clearValues()}))})).cath((function(t){c.a.fire({position:"center",icon:"error",title:""+t,showConfirmButton:!0})}))},clearValues:function(){this.$store.dispatch("cart/clearCart")},handleSubmit:function(){console.log("submit!")}},middleware:"authentication"},u=d,m=a("2877"),h=Object(m["a"])(u,s,i,!1,null,null,null);e["default"]=h.exports},"9b35":function(t,e){t.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=chunk-8711e4d2.a1c249f3.js.map